import{C as t,d as n,y as e,D as o,x as r,E as c,r as i,w as u,G as s,z as f,H as a,I as l}from"./vue-core-BukVpsLG.js";const p="undefined"!=typeof document;function d(t){return"object"==typeof t||"displayName"in t||"props"in t||"t"in t}const m=Object.assign;function h(t,n){const e={};for(const o in n){const r=n[o];e[o]=y(r)?r.map(t):t(r)}return e}const b=()=>{},y=Array.isArray;function g(t,n){const e={};for(const o in t)e[o]=o in n?n[o]:t[o];return e}const v=/#/g,w=/&/g,R=/\//g,E=/=/g,O=/\?/g,S=/\+/g,P=/%5B/g,k=/%5D/g,A=/%5E/g,C=/%60/g,$=/%7B/g,j=/%7C/g,B=/%7D/g,I=/%20/g;function D(t){return null==t?"":encodeURI(""+t).replace(j,"|").replace(P,"[").replace(k,"]")}function x(t){return D(t).replace(S,"%2B").replace(I,"+").replace(v,"%23").replace(w,"%26").replace(C,"`").replace($,"{").replace(B,"}").replace(A,"^")}function N(t){return x(t).replace(E,"%3D")}function _(t){return function(t){return D(t).replace(v,"%23").replace(O,"%3F")}(t).replace(R,"%2F")}function T(t){if(null==t)return null;try{return decodeURIComponent(""+t)}catch(n){}return""+t}const M=/\/$/;function G(t,n,e="/"){let o,r={},c="",i="";const u=n.indexOf("#");let s=n.indexOf("?");return s=u>=0&&s>u?-1:s,0>s||(o=n.slice(0,s),c=n.slice(s,u>0?u:n.length),r=t(c.slice(1))),0>u||(o=o||n.slice(0,u),i=n.slice(u,n.length)),o=function(t,n){if(t.startsWith("/"))return t;if(!t)return n;const e=n.split("/"),o=t.split("/"),r=o[o.length-1];".."!==r&&"."!==r||o.push("");let c,i,u=e.length-1;for(c=0;c<o.length;c++)if(i=o[c],"."!==i){if(".."!==i)break;u>1&&u--}return e.slice(0,u).join("/")+"/"+o.slice(c).join("/")}(null!=o?o:n,e),{fullPath:o+c+i,path:o,query:r,hash:T(i)}}function L(t,n){return n&&t.toLowerCase().startsWith(n.toLowerCase())?t.slice(n.length)||"/":t}function U(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function V(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const e in t)if(!q(t[e],n[e]))return!1;return!0}function q(t,n){return y(t)?F(t,n):y(n)?F(n,t):t===n}function F(t,n){return y(n)?t.length===n.length&&t.every((t,e)=>t===n[e]):1===t.length&&t[0]===n}const H={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let z=function(t){return t.pop="pop",t.push="push",t}({}),W=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});const Z=/^[^#]+#/;function J(t,n){return t.replace(Z,"#")+n}const K=()=>({left:window.scrollX,top:window.scrollY});function Q(t,n){return(history.state?history.state.position-n:-1)+t}const X=new Map;function Y(t){return"string"==typeof t||"symbol"==typeof t}let tt=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const nt=Symbol("");function et(t,n){return m(Error(),{type:t,[nt]:!0},n)}function ot(t,n){return t instanceof Error&&nt in t&&(null==n||!!(t.type&n))}function rt(t){const n={};if(""===t||"?"===t)return n;const e=("?"===t[0]?t.slice(1):t).split("&");for(let o=0;o<e.length;++o){const t=e[o].replace(S," "),r=t.indexOf("="),c=T(0>r?t:t.slice(0,r)),i=0>r?null:T(t.slice(r+1));if(c in n){let t=n[c];y(t)||(t=n[c]=[t]),t.push(i)}else n[c]=i}return n}function ct(t){let n="";for(let e in t){const o=t[e];e=N(e),null!=o?(y(o)?o.map(t=>t&&x(t)):[o&&x(o)]).forEach(t=>{void 0!==t&&(n+=(n.length?"&":"")+e,null!=t&&(n+="="+t))}):void 0!==o&&(n+=(n.length?"&":"")+e)}return n}function it(t){const n={};for(const e in t){const o=t[e];void 0!==o&&(n[e]=y(o)?o.map(t=>null==t?null:""+t):null==o?o:""+o)}return n}tt.MATCHER_NOT_FOUND,tt.NAVIGATION_GUARD_REDIRECT,tt.NAVIGATION_ABORTED,tt.NAVIGATION_CANCELLED,tt.NAVIGATION_DUPLICATED;const ut=Symbol(""),st=Symbol(""),ft=Symbol(""),at=Symbol(""),lt=Symbol("");function pt(){let t=[];return{add:function(n){return t.push(n),()=>{const e=t.indexOf(n);e>-1&&t.splice(e,1)}},list:()=>t.slice(),reset:function(){t=[]}}}function dt(t,n,e,o,r,c=t=>t()){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((u,s)=>{const f=t=>{var c;!1===t?s(et(tt.NAVIGATION_ABORTED,{from:e,to:n})):t instanceof Error?s(t):"string"==typeof(c=t)||c&&"object"==typeof c?s(et(tt.NAVIGATION_GUARD_REDIRECT,{from:n,to:t})):(i&&o.enterCallbacks[r]===i&&"function"==typeof t&&i.push(t),u())},a=c(()=>t.call(o&&o.instances[r],n,e,f));let l=Promise.resolve(a);3>t.length&&(l=l.then(f)),l.catch(t=>s(t))})}function mt(t,n,e,o,r=t=>t()){const c=[];for(const i of t)for(const t in i.components){let u=i.components[t];if("beforeRouteEnter"===n||i.instances[t])if(d(u)){const s=(u.t||u)[n];s&&c.push(dt(s,e,o,i,t,r))}else{let s=u();c.push(()=>s.then(c=>{if(!c)throw Error(`Couldn't resolve component "${t}" at "${i.path}"`);const u=(s=c).o||"Module"===s[Symbol.toStringTag]||s.default&&d(s.default)?c.default:c;var s;i.mods[t]=c,i.components[t]=u;const f=(u.t||u)[n];return f&&dt(f,e,o,i,t,r)()}))}}return c}function ht(t,n){const{pathname:e,search:o,hash:r}=n,c=t.indexOf("#");if(c>-1){let n=r.includes(t.slice(c))?t.slice(c).length:1,e=r.slice(n);return"/"!==e[0]&&(e="/"+e),L(e,"")}return L(e,t)+o+r}function bt(t,n,e,o=!1,r=!1){return{back:t,current:n,forward:e,replaced:o,position:window.history.length,scroll:r?K():null}}function yt(t){const n=function(t){const{history:n,location:e}=window,o={value:ht(t,e)},r={value:n.state};function c(o,c,i){const u=t.indexOf("#"),s=u>-1?(e.host&&document.querySelector("base")?t:t.slice(u))+o:location.protocol+"//"+location.host+t+o;try{n[i?"replaceState":"pushState"](c,"",s),r.value=c}catch(f){e[i?"replace":"assign"](s)}}return r.value||c(o.value,{back:null,current:o.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0),{location:o,state:r,push:function(t,e){const i=m({},r.value,n.state,{forward:t,scroll:K()});c(i.current,i,!0),c(t,m({},bt(o.value,t,null),{position:i.position+1},e),!1),o.value=t},replace:function(t,e){c(t,m({},n.state,bt(r.value.back,t,r.value.forward,!0),e,{position:r.value.position}),!0),o.value=t}}}(t=function(t){if(!t)if(p){const n=document.querySelector("base");t=(t=n&&n.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(M,"")}(t)),e=function(t,n,e,o){let r=[],c=[],i=null;const u=({state:c})=>{const u=ht(t,location),s=e.value,f=n.value;let a=0;if(c){if(e.value=u,n.value=c,i&&i===s)return void(i=null);a=f?c.position-f.position:0}else o(u);r.forEach(t=>{t(e.value,s,{delta:a,type:z.pop,direction:a?a>0?W.forward:W.back:W.unknown})})};function s(){if("hidden"===document.visibilityState){const{history:t}=window;if(!t.state)return;t.replaceState(m({},t.state,{scroll:K()}),"")}}return window.addEventListener("popstate",u),window.addEventListener("pagehide",s),document.addEventListener("visibilitychange",s),{pauseListeners:function(){i=e.value},listen:function(t){r.push(t);const n=()=>{const n=r.indexOf(t);n>-1&&r.splice(n,1)};return c.push(n),n},destroy:function(){for(const t of c)t();c=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",s),document.removeEventListener("visibilitychange",s)}}}(t,n.state,n.location,n.replace),o=m({location:"",base:t,go:function(t,n=!0){n||e.pauseListeners(),history.go(t)},createHref:J.bind(null,t)},n,e);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>n.state.value}),o}let gt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var vt=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(vt||{});const wt={type:gt.Static,value:""},Rt=/[a-zA-Z0-9_]/,Et="[^/]+?",Ot={sensitive:!1,strict:!1,start:!0,end:!0};var St=function(t){return t[t.i=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(St||{});const Pt=/[.+*?^${}()[\]/\\]/g;function kt(t,n){let e=0;for(;e<t.length&&e<n.length;){const o=n[e]-t[e];if(o)return o;e++}return t.length<n.length?1===t.length&&t[0]===St.Static+St.Segment?-1:1:t.length>n.length?1===n.length&&n[0]===St.Static+St.Segment?1:-1:0}function At(t,n){let e=0;const o=t.score,r=n.score;for(;e<o.length&&e<r.length;){const t=kt(o[e],r[e]);if(t)return t;e++}if(1===Math.abs(r.length-o.length)){if(Ct(o))return 1;if(Ct(r))return-1}return r.length-o.length}function Ct(t){const n=t[t.length-1];return t.length>0&&0>n[n.length-1]}const $t={strict:!1,end:!0,sensitive:!1};function jt(t,n,e){const o=function(t,n){const e=m({},Ot,n),o=[];let r=e.start?"^":"";const c=[];for(const u of t){const t=u.length?[]:[St.Root];e.strict&&!u.length&&(r+="/");for(let n=0;n<u.length;n++){const o=u[n];let i=St.Segment+(e.sensitive?St.BonusCaseSensitive:0);if(o.type===gt.Static)n||(r+="/"),r+=o.value.replace(Pt,"\\$&"),i+=St.Static;else if(o.type===gt.Param){const{value:t,repeatable:e,optional:s,regexp:f}=o;c.push({name:t,repeatable:e,optional:s});const a=f||Et;a!==Et&&(i+=St.BonusCustomRegExp);let l=e?`((?:${a})(?:/(?:${a}))*)`:`(${a})`;n||(l=s&&2>u.length?`(?:/${l})`:"/"+l),s&&(l+="?"),r+=l,i+=St.Dynamic,s&&(i+=St.BonusOptional),e&&(i+=St.BonusRepeatable),".*"===a&&(i+=St.BonusWildcard)}t.push(i)}o.push(t)}if(e.strict&&e.end){const t=o.length-1;o[t][o[t].length-1]+=St.BonusStrict}e.strict||(r+="/?"),e.end?r+="$":e.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=RegExp(r,e.sensitive?"":"i");return{re:i,score:o,keys:c,parse:function(t){const n=t.match(i),e={};if(!n)return null;for(let o=1;o<n.length;o++){const t=n[o]||"",r=c[o-1];e[r.name]=t&&r.repeatable?t.split("/"):t}return e},stringify:function(n){let e="",o=!1;for(const r of t){o&&e.endsWith("/")||(e+="/"),o=!1;for(const t of r)if(t.type===gt.Static)e+=t.value;else if(t.type===gt.Param){const{value:c,repeatable:i,optional:u}=t,s=c in n?n[c]:"";if(y(s)&&!i)throw Error(`Provided param "${c}" is an array but it is not repeatable (* or + modifiers)`);const f=y(s)?s.join("/"):s;if(!f){if(!u)throw Error(`Missing required param "${c}"`);2>r.length&&(e.endsWith("/")?e=e.slice(0,-1):o=!0)}e+=f}}return e||"/"}}}(function(t){if(!t)return[[]];if("/"===t)return[[wt]];if(!t.startsWith("/"))throw Error(`Invalid path "${t}"`);function n(t){throw Error(`ERR (${e})/"${f}": ${t}`)}let e=vt.Static,o=e;const r=[];let c;function i(){c&&r.push(c),c=[]}let u,s=0,f="",a="";function l(){f&&(e===vt.Static?c.push({type:gt.Static,value:f}):e===vt.Param||e===vt.ParamRegExp||e===vt.ParamRegExpEnd?(1>=c.length||"*"!==u&&"+"!==u||n(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),c.push({type:gt.Param,value:f,regexp:a,repeatable:"*"===u||"+"===u,optional:"*"===u||"?"===u})):n("Invalid state to consume buffer"),f="")}function p(){f+=u}for(;s<t.length;)if(u=t[s++],"\\"!==u||e===vt.ParamRegExp)switch(e){case vt.Static:"/"===u?(f&&l(),i()):":"===u?(l(),e=vt.Param):p();break;case vt.EscapeNext:p(),e=o;break;case vt.Param:"("===u?e=vt.ParamRegExp:Rt.test(u)?p():(l(),e=vt.Static,"*"!==u&&"?"!==u&&"+"!==u&&s--);break;case vt.ParamRegExp:")"===u?"\\"==a[a.length-1]?a=a.slice(0,-1)+u:e=vt.ParamRegExpEnd:a+=u;break;case vt.ParamRegExpEnd:l(),e=vt.Static,"*"!==u&&"?"!==u&&"+"!==u&&s--,a="";break;default:n("Unknown state")}else o=e,e=vt.EscapeNext;return e===vt.ParamRegExp&&n(`Unfinished custom RegExp for param "${f}"`),l(),i(),r}(t.path),e),r=m(o,{record:t,parent:n,children:[],alias:[]});return n&&!r.record.aliasOf==!n.record.aliasOf&&n.children.push(r),r}function Bt(t,n){const e={};for(const o of n)o in t&&(e[o]=t[o]);return e}function It(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Dt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function Dt(t){const n={},e=t.props||!1;if("component"in t)n.default=e;else for(const o in t.components)n[o]="object"==typeof e?e[o]:e;return n}function xt(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Nt(t){return t.reduce((t,n)=>m(t,n.meta),{})}function _t({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Tt(t){const n=a(ft),o=a(at),c=r(()=>{const o=e(t.to);return n.resolve(o)}),i=r(()=>{const{matched:t}=c.value,{length:n}=t,e=t[n-1],r=o.matched;if(!e||!r.length)return-1;const i=r.findIndex(U.bind(null,e));if(i>-1)return i;const u=Gt(t[n-2]);return n>1&&Gt(e)===u&&r[r.length-1].path!==u?r.findIndex(U.bind(null,t[n-2])):i}),u=r(()=>i.value>-1&&function(t,n){for(const e in n){const o=n[e],r=t[e];if("string"==typeof o){if(o!==r)return!1}else if(!y(r)||r.length!==o.length||o.some((t,n)=>t!==r[n]))return!1}return!0}(o.params,c.value.params)),s=r(()=>i.value>-1&&i.value===o.matched.length-1&&V(o.params,c.value.params));return{route:c,href:r(()=>c.value.href),isActive:u,isExactActive:s,navigate:function(o={}){if(function(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}(o)){const o=n[e(t.replace)?"replace":"push"](e(t.to)).catch(b);return t.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>o),o}return Promise.resolve()}}}const Mt=n({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Tt,setup(t,{slots:n}){const e=l(Tt(t)),{options:o}=a(ft),c=r(()=>({[Lt(t.activeClass,o.linkActiveClass,"router-link-active")]:e.isActive,[Lt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const o=n.default&&(1===(r=n.default(e)).length?r[0]:r);var r;return t.custom?o:s("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:c.value},o)}}});function Gt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Lt=(t,n,e)=>null!=t?t:null!=n?n:e;function Ut(t,n){if(!t)return null;const e=t(n);return 1===e.length?e[0]:e}const Vt=n({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:o}){const f=a(lt),l=r(()=>t.route||f.value),p=a(st,0),d=r(()=>{let t=e(p);const{matched:n}=l.value;let o;for(;(o=n[t])&&!o.components;)t++;return t}),h=r(()=>l.value.matched[d.value]);c(st,r(()=>d.value+1)),c(ut,h),c(lt,l);const b=i();return u(()=>[b.value,h.value,t.name],([t,n,e],[o,r,c])=>{n&&(n.instances[e]=t,r&&r!==n&&t&&t===o&&(n.leaveGuards.size||(n.leaveGuards=r.leaveGuards),n.updateGuards.size||(n.updateGuards=r.updateGuards))),!t||!n||r&&U(n,r)&&o||(n.enterCallbacks[e]||[]).forEach(n=>n(t))},{flush:"post"}),()=>{const e=l.value,r=t.name,c=h.value,i=c&&c.components[r];if(!i)return Ut(o.default,{Component:i,route:e});const u=c.props[r],f=u?!0===u?e.params:"function"==typeof u?u(e):u:null,a=s(i,m({},f,n,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(c.instances[r]=null)},ref:b}));return Ut(o.default,{Component:a,route:e})||a}}});function qt(n){const r=function(t,n){const e=[],o=new Map;function r(t,e,o){const u=!o,s=It(t);s.aliasOf=o&&o.record;const f=g(n,t),a=[s];if("alias"in t){const n="string"==typeof t.alias?[t.alias]:t.alias;for(const t of n)a.push(It(m({},s,{components:o?o.record.components:s.components,path:t,aliasOf:o?o.record:s})))}let l,p;for(const n of a){const{path:a}=n;if(e&&"/"!==a[0]){const t=e.record.path,o="/"===t[t.length-1]?"":"/";n.path=e.record.path+(a&&o+a)}if(l=jt(n,e,f),o?o.alias.push(l):(p=p||l,p!==l&&p.alias.push(l),u&&t.name&&!xt(l)&&c(t.name)),_t(l)&&i(l),s.children){const t=s.children;for(let n=0;n<t.length;n++)r(t[n],l,o&&o.children[n])}o=o||l}return p?()=>{c(p)}:b}function c(t){if(Y(t)){const n=o.get(t);n&&(o.delete(t),e.splice(e.indexOf(n),1),n.children.forEach(c),n.alias.forEach(c))}else{const n=e.indexOf(t);n>-1&&(e.splice(n,1),t.record.name&&o.delete(t.record.name),t.children.forEach(c),t.alias.forEach(c))}}function i(t){const n=function(t,n){let e=0,o=n.length;for(;e!==o;){const r=e+o>>1;0>At(t,n[r])?o=r:e=r+1}const r=function(t){let n=t;for(;n=n.parent;)if(_t(n)&&0===At(t,n))return n}(t);return r&&(o=n.lastIndexOf(r,o-1)),o}(t,e);e.splice(n,0,t),t.record.name&&!xt(t)&&o.set(t.record.name,t)}return n=g($t,n),t.forEach(t=>r(t)),{addRoute:r,resolve:function(t,n){let r,c,i,u={};if("name"in t&&t.name){if(r=o.get(t.name),!r)throw et(tt.MATCHER_NOT_FOUND,{location:t});i=r.record.name,u=m(Bt(n.params,r.keys.filter(t=>!t.optional).concat(r.parent?r.parent.keys.filter(t=>t.optional):[]).map(t=>t.name)),t.params&&Bt(t.params,r.keys.map(t=>t.name))),c=r.stringify(u)}else if(null!=t.path)c=t.path,r=e.find(t=>t.re.test(c)),r&&(u=r.parse(c),i=r.record.name);else{if(r=n.name?o.get(n.name):e.find(t=>t.re.test(n.path)),!r)throw et(tt.MATCHER_NOT_FOUND,{location:t,currentLocation:n});i=r.record.name,u=m({},n.params,t.params),c=r.stringify(u)}const s=[];let f=r;for(;f;)s.unshift(f.record),f=f.parent;return{name:i,path:c,params:u,matched:s,meta:Nt(s)}},removeRoute:c,clearRoutes:function(){e.length=0,o.clear()},getRoutes:function(){return e},getRecordMatcher:function(t){return o.get(t)}}}(n.routes,n),c=n.parseQuery||rt,i=n.stringifyQuery||ct,u=n.history,s=pt(),a=pt(),l=pt(),d=t(H);let v=H;p&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=h.bind(null,t=>""+t),R=h.bind(null,_),E=h.bind(null,T);function O(t,n){if(n=m({},n||d.value),"string"==typeof t){const e=G(c,t,n.path),o=r.resolve({path:e.path},n),i=u.createHref(e.fullPath);return m(e,o,{params:E(o.params),hash:T(e.hash),redirectedFrom:void 0,href:i})}let e;if(null!=t.path)e=m({},t,{path:G(c,t.path,n.path).path});else{const o=m({},t.params);for(const t in o)null==o[t]&&delete o[t];e=m({},t,{params:R(o)}),n.params=R(n.params)}const o=r.resolve(e,n),s=t.hash||"";o.params=w(E(o.params));const f=function(t,n){const e=n.query?t(n.query):"";return n.path+(e&&"?")+e+(n.hash||"")}(i,m({},t,{hash:(a=s,D(a).replace($,"{").replace(B,"}").replace(A,"^")),path:o.path}));var a;const l=u.createHref(f);return m({fullPath:f,hash:s,query:i===ct?it(t.query):t.query||{}},o,{redirectedFrom:void 0,href:l})}function S(t){return"string"==typeof t?G(c,t,d.value.path):m({},t)}function P(t,n){if(v!==t)return et(tt.NAVIGATION_CANCELLED,{from:n,to:t})}function k(t){return j(t)}function C(t,n){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:o}=e;let r="function"==typeof o?o(t,n):o;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=S(r):{path:r},r.params={}),m({query:t.query,hash:t.hash,params:null!=r.path?{}:t.params},r)}}function j(t,n){const e=v=O(t),o=d.value,r=t.state,c=t.force,u=!0===t.replace,s=C(e,o);if(s)return j(m(S(s),{state:"object"==typeof s?m({},r,s.state):r,force:c,replace:u}),n||e);const f=e;let a;return f.redirectedFrom=n,!c&&function(t,n,e){const o=n.matched.length-1,r=e.matched.length-1;return o>-1&&o===r&&U(n.matched[o],e.matched[r])&&V(n.params,e.params)&&t(n.query)===t(e.query)&&n.hash===e.hash}(i,o,e)&&(a=et(tt.NAVIGATION_DUPLICATED,{to:f,from:o}),ut(o,o,!0,!1)),(a?Promise.resolve(a):N(f,o)).catch(t=>ot(t)?ot(t,tt.NAVIGATION_GUARD_REDIRECT)?t:nt(t):J(t,f,o)).then(t=>{if(t){if(ot(t,tt.NAVIGATION_GUARD_REDIRECT))return j(m({replace:u},S(t.to),{state:"object"==typeof t.to?m({},r,t.to.state):r,force:c}),n||f)}else t=L(f,o,!0,u,r);return M(f,o,t),t})}function I(t,n){const e=P(t,n);return e?Promise.reject(e):Promise.resolve()}function x(t){const n=bt.values().next().value;return n&&"function"==typeof n.runWithContext?n.runWithContext(t):t()}function N(t,n){let e;const[o,r,c]=function(t,n){const e=[],o=[],r=[],c=Math.max(n.matched.length,t.matched.length);for(let i=0;c>i;i++){const c=n.matched[i];c&&(t.matched.find(t=>U(t,c))?o.push(c):e.push(c));const u=t.matched[i];u&&(n.matched.find(t=>U(t,u))||r.push(u))}return[e,o,r]}(t,n);e=mt(o.reverse(),"beforeRouteLeave",t,n);for(const u of o)u.leaveGuards.forEach(o=>{e.push(dt(o,t,n))});const i=I.bind(null,t,n);return e.push(i),gt(e).then(()=>{e=[];for(const o of s.list())e.push(dt(o,t,n));return e.push(i),gt(e)}).then(()=>{e=mt(r,"beforeRouteUpdate",t,n);for(const o of r)o.updateGuards.forEach(o=>{e.push(dt(o,t,n))});return e.push(i),gt(e)}).then(()=>{e=[];for(const o of c)if(o.beforeEnter)if(y(o.beforeEnter))for(const r of o.beforeEnter)e.push(dt(r,t,n));else e.push(dt(o.beforeEnter,t,n));return e.push(i),gt(e)}).then(()=>(t.matched.forEach(t=>t.enterCallbacks={}),e=mt(c,"beforeRouteEnter",t,n,x),e.push(i),gt(e))).then(()=>{e=[];for(const o of a.list())e.push(dt(o,t,n));return e.push(i),gt(e)}).catch(t=>ot(t,tt.NAVIGATION_CANCELLED)?t:Promise.reject(t))}function M(t,n,e){l.list().forEach(o=>x(()=>o(t,n,e)))}function L(t,n,e,o,r){const c=P(t,n);if(c)return c;const i=n===H,s=p?history.state:{};e&&(o||i?u.replace(t.fullPath,m({scroll:i&&s&&s.scroll},r)):u.push(t.fullPath,r)),d.value=t,ut(t,n,e,i),nt()}let q,F,W=pt(),Z=pt();function J(t,n,e){nt(t);const o=Z.list();return o.length&&o.forEach(o=>o(t,n,e)),Promise.reject(t)}function nt(t){return F||(F=!t,q||(q=u.listen((t,n,e)=>{if(!yt.listening)return;const o=O(t),r=C(o,yt.currentRoute.value);if(r)return void j(m(r,{replace:!0,force:!0}),o).catch(b);v=o;const c=d.value;var i,s;p&&(i=Q(c.fullPath,e.delta),s=K(),X.set(i,s)),N(o,c).catch(t=>ot(t,tt.NAVIGATION_ABORTED|tt.NAVIGATION_CANCELLED)?t:ot(t,tt.NAVIGATION_GUARD_REDIRECT)?(j(m(S(t.to),{force:!0}),o).then(t=>{ot(t,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&!e.delta&&e.type===z.pop&&u.go(-1,!1)}).catch(b),Promise.reject()):(e.delta&&u.go(-e.delta,!1),J(t,o,c))).then(t=>{(t=t||L(o,c,!1))&&(e.delta&&!ot(t,tt.NAVIGATION_CANCELLED)?u.go(-e.delta,!1):e.type===z.pop&&ot(t,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&u.go(-1,!1)),M(o,c,t)}).catch(b)})),W.list().forEach(([n,e])=>t?e(t):n()),W.reset()),t}function ut(t,e,o,r){const{scrollBehavior:c}=n;if(!p||!c)return Promise.resolve();const i=!o&&function(t){const n=X.get(t);return X.delete(t),n}(Q(t.fullPath,0))||(r||!o)&&history.state&&history.state.scroll||null;return f().then(()=>c(t,e,i)).then(t=>t&&function(t){let n;if("el"in t){const e=t.el,o="string"==typeof e&&e.startsWith("#"),r="string"==typeof e?o?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!r)return;n=function(t,n){const e=document.documentElement.getBoundingClientRect(),o=t.getBoundingClientRect();return{behavior:n.behavior,left:o.left-e.left-(n.left||0),top:o.top-e.top-(n.top||0)}}(r,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(null!=n.left?n.left:window.scrollX,null!=n.top?n.top:window.scrollY)}(t)).catch(n=>J(n,t,e))}const st=t=>u.go(t);let ht;const bt=new Set,yt={currentRoute:d,listening:!0,addRoute:function(t,n){let e,o;return Y(t)?(e=r.getRecordMatcher(t),o=n):o=t,r.addRoute(o,e)},removeRoute:function(t){const n=r.getRecordMatcher(t);n&&r.removeRoute(n)},clearRoutes:r.clearRoutes,hasRoute:function(t){return!!r.getRecordMatcher(t)},getRoutes:function(){return r.getRoutes().map(t=>t.record)},resolve:O,options:n,push:k,replace:function(t){return k(m(S(t),{replace:!0}))},go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:s.add,beforeResolve:a.add,afterEach:l.add,onError:Z.add,isReady:function(){return F&&d.value!==H?Promise.resolve():new Promise((t,n)=>{W.add([t,n])})},install(t){t.component("RouterLink",Mt),t.component("RouterView",Vt),t.config.globalProperties.$router=yt,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>e(d)}),p&&!ht&&d.value===H&&(ht=!0,k(u.location).catch(t=>{}));const n={};for(const e in H)Object.defineProperty(n,e,{get:()=>d.value[e],enumerable:!0});t.provide(ft,yt),t.provide(at,o(n)),t.provide(lt,d);const r=t.unmount;bt.add(t),t.unmount=function(){bt.delete(t),1>bt.size&&(v=H,q&&q(),q=null,d.value=H,ht=!1,F=!1),r()}}};function gt(t){return t.reduce((t,n)=>t.then(()=>x(n)),Promise.resolve())}return yt}function Ft(){return a(ft)}function Ht(t){return a(at)}export{Mt as R,Ht as a,Vt as b,qt as c,yt as d,Ft as u};
